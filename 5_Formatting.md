# 5. 형식 맞추기

프로그래머라면 형식을 깔끔히 맞춰서 코드를 짜야한다. 팀으로 일한다면 팀이 합의해 규칙을 정하고 모두가 그 규칙을 따라야 한다.
<br/><br/>
## 형식을 맞추는 목적

코드 형식은 의사소통의 일환이다.

오늘 구현한 코드의 가독성은 앞으로 바뀔 코드의 품질에 지대한 영향을 끼친다. 오랜 시간이 지나 기존 코드의 흔적을 찾아보기 힘든 수준으로 코드가 변경돼도 맨 처음 잡아놓은 코드 스타일과 가독성은 유지보수나 확장성에 지대한 영향을 끼친다.

원래의 로직은 사라지더라도 스타일은 사라지지 않는다.
<br/><br/>
## 적절한 행 길이를 유지하라

일반적으로 긴 것 보다는 짧은 것이 이해하기가 쉽다.
<br/><br/>
### 신문 기사처럼 작성하라

신문 기사는 위에서 부터 기사의 내용을 요약하는 표제가 나오고, 쭉 읽어 내려갈수록 상세한 내용이 나온다. 소스 파일도 신문 기사와 비슷하게 작성한다.

이름은 간단하고 설명이 가능하게 짓는다.

소스 파일 첫 부분은 고차원 개념과 알고리즘을 설명한다. 아래로 내려갈수록 상세한 내용을 작성한다. 마지막에는 가장 저차원 함수와 세부 내역이 나온다.
<br/><br/>
### 개념은 빈 행으로 분리하라

각 행은 수식이나 절을 의미하고, 일련의 행 블록은 완결된 하나의 생각을 표현한다. 생각의 사이에는 빈 행을 넣어서 분리해야 한다.

빈 행은 새로운 개념을 시작한다는 시각적 단서이다.
<br/><br/>
### 세로 밀집도

세로 밀집도는 연관성을 의미한다. 서로 밀접한 코드 행은 세로로 가까이 놓여야 한다.
<br/><br/>
### 수직거리

서로 밀접한 개념은 세로로 가까이 두어야 한다.

연관성이 깊은 두 개념이 멀리 떨어져 있으면 코드를 읽는 사람이 코드 여기저기를 뒤져서 찾아다녀야 한다. 가독성이 굉장히 떨어진다.

- 변수 선언: 변수는 사용하는 위치에 최대한 가깝게 선언한다.
    - 인스턴스 변수
        - 클래스의 맨 처음에 선언한다.
        - 변수간 세로로 거리를 두지 않는다.
        - 사실 굳이 처음일 필요는 없다. 잘 알려진 위치에 모아놓으면 된다.
- 종속 함수
    - 한 함수가 다른 함수를 호출한다면 두 함수는 세로로 가깝게 배치한다.
    - 가능하다면 호출하는 함수를 위에 배치한다.
- 개념적 유사성
    - 개념적 친화도가 높은 코드끼리는 가까이 배치한다.
<br/><br/>
### 세로 순서

함수 호출 종속성은 아래 방향으로 유지한다. 호출하는 함수를 호출되는 함수보다 위에 배치한다. 그러면 소스 코드 모듈이 고차원에서 저차원으로 내려간다.

신문 기사처럼 가장 중요한 개념을 가장 먼저 표현한다. 세세한 사항은 가장 마지막에 표현한다.
<br/><br/>
## 가로형식 맞추기

가로로 짧은 행이 바람직하다.
<br/><br/>
### 가로 공백과 밀집도

가로로는 공백을 사용해서 밀접한 개념과 느슨한 개념을 표현한다.

```swift
// 할당 연산자 양옆에 공백을 추가해서 두가지 주요 요소가 확실히 나뉜다는 것이 더 분명히 표현된다.
let lineSize = line.length()

// 함수와 인수는 밀접하기 때문에 공백으로 분리하지 않는다.
func calcLength(str: String) -> Int {
	...
}

// 함수를 호출할 때 인수끼리는 공백으로 분리한다.
let lineSize = line.length(option, fontSize)

// 우선 순위를 나타내기 위해서 공백을 사용한다.
func determinant(a: Double, b: Double, c: Double) -> Double { 
	return b*b - 4*a*c
}
```
<br/><br/>
### 가로 정렬

가로 정렬은 엉뚱한 부분을 강조해서 진짜 의도가 가려지게 한다. 하지 말아라.

정렬하지 않으면 오히려 결함을 찾기가 더 쉬워진다. 정렬이 필요할 정도로 길면 문제는 길이지 정렬이 아니다. 그 정도로 길면 클래스를 쪼개라.
<br/><br/>
### 들여쓰기

계층에서 각각의 수준은 이름을 선언하는 범위이고, 선언문과 실행문을 해석하는 범위이다.

들여쓰기한 파일은 구조가 한눈에 보인다.

들여쓰기를 절대 무시하지 말아라. 길이가 짧아서 한 행에 작성될 수 있다고 하더라도 들여쓰기를 적용해라.

```swift
// 나쁜 예
guard let data = res as? ResData else { return }

// 좋은 예
guard let data = res as? ResData else { 
	return
}
```
<br/><br/>
### 팀 규칙

프로그래머라면 각자가 선호하는 규칙이 있다. 하지만 팀으로 일한다면 자신이 선호해야 할 규칙은 팀 규칙이다.

팀은 한가지 규칙에 합의해야 한다. 그리고 모든 팀원은 그 규칙을 따라야한다. 그래야 소프트웨어가 일관된 스타일을 보인다.
